!function(e){"use strict";e(document).ready(function(){function t(t){t.find(".react-audio-format").each(function(){var t=e(this),i=t.find(".react-audio-format-input"),o=t.find(".react-upload-audio-format-button");reactAdmin.mediaBrowser(o,{mediaOptions:reactAdmin.audioMediaOptions,callback:function(e){try{var t=e.first().toJSON(),o=reactAdmin.makeUploadUrlRelative(t.url);i.val(o),a()}catch(c){throw reactAdmin.log(e),c}}})})}function a(){var t=[];e("#react-audio-tracks > .react-audio-track").each(function(){var a=e(this);t.push({id:e(this).data("id"),name:a.find(".react-audio-track-name-input").val(),m4a:a.find(".react-audio-format-m4a").val(),mp3:a.find(".react-audio-format-mp3").val(),oga:a.find(".react-audio-format-ogg").val()})}),e("#_react_audio").val(JSON.stringify(t))}var i=e(document),o=".react-meta-box-field-outer",c=".react-meta-multi-outer";e(".react-layout-selector").each(function(){var t=e(this),a=t.find("option"),i="react-select-active",o=e('<div class="react-layout-selector react-selector"/>');a.each(function(){var a=e(this),c=e('<div class="react-layout-option react-tooltip"/>').appendTo(o).click(function(){o.find(" > div").removeClass(i),c.addClass(i),t.val(a.val())}).append('<img src="'+reactAdminL10n.themeAdminUrl+"/images/select-layout-"+(a.val()||"default")+'.png" alt="" />'),n=e('<span class="react-tooltip-text">').html(a.html());c.append(n),a.is(":selected")&&c.addClass(i)}),t.hide().after(o)}),reactAdmin.textureSelectors(),reactAdmin.accordion(),reactAdmin.rangeSliders(),reactAdmin.backgroundPositionSelectors(),reactAdmin.backgroundRepeatSelectors(),e("#_react_background_video").bind("blur",function(){var t=e(this).val();if(t){var a,i=/http(s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,o=t.match(i),c=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,n=t.match(c);o?(a=o[3],a&&e.getJSON("http://vimeo.com/api/v2/video/"+a+".json?callback=?",function(t){null!==t&&"object"==typeof t[0]&&t[0].width&&t[0].height&&(e("#_react_background_video_width").val(t[0].width),e("#_react_background_video_height").val(t[0].height))})):n&&(a=RegExp.$1,a&&e.ajax({url:reactAdminL10n.ajaxUrl,data:{action:"react_get_youtube_video_dimensions",id:a},dataType:"json"}).done(function(t){t=reactAdmin.sanitizeResponse(t),"success"===t.type&&(e("#_react_background_video_width").val(t.width),e("#_react_background_video_height").val(t.height))}))}else e("#_react_background_video_width").val(""),e("#_react_background_video_height").val("")}),e("#_react_video_embed").bind("blur",function(){var t=e(this).val();if(t){var a,i=/http(s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,o=t.match(i),c=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,n=t.match(c);o?(a=o[3],a&&e.getJSON("http://vimeo.com/api/v2/video/"+a+".json?callback=?",function(t){null!==t&&"object"==typeof t[0]&&t[0].width&&t[0].height&&(e("#_react_video_embed_width").val(t[0].width),e("#_react_video_embed_height").val(t[0].height))})):n&&(a=RegExp.$1,a&&e.ajax({url:reactAdminL10n.ajaxUrl,data:{action:"react_get_youtube_video_dimensions",id:a},dataType:"json"}).done(function(t){t=reactAdmin.sanitizeResponse(t),"success"===t.type&&(e("#_react_video_embed_width").val(t.width),e("#_react_video_embed_height").val(t.height))}))}else e("#_react_video_embed_width").val(""),e("#_react_video_embed_height").val("")}),e.each(["intro","body","background"],function(t,a){e.each(["","_retina"],function(t,o){reactAdmin.mediaBrowser(e("#"+a+"_image"+o+"_browse"),{mediaOptions:reactAdmin.imageMediaOptions,callback:function(t){try{var i=t.first().toJSON(),c=reactAdmin.makeUploadUrlRelative(i.url);e("#_react_"+a+"_image"+o).val(c).blur(),e("#_react_"+a+"_image"+o+"_width").val(i.width),e("#_react_"+a+"_image"+o+"_height").val(i.height)}catch(n){throw reactAdmin.log(t),n}}}),e("#_react_"+a+"_image"+o).blur(function(){reactAdmin.handleImageUploadSourceChange(e("#_react_"+a+"_image"+o),e("#react-"+a+"_image"+o+"-holder"),e("#_react_"+a+"_image"+o+"_width"),e("#_react_"+a+"_image"+o+"_height"))}).data("url",e("#_react_"+a+"_image"+o).val()),i.on("click","#react-"+a+"_image"+o+"-holder .react-delete-uploaded-image",function(){e(".qtip").hide(),e("#_react_"+a+"_image"+o+", #_react_"+a+"_image"+o+"_width, #_react_"+a+"_image"+o+"_height").val(""),e("#_react_"+a+"_image"+o).blur()})}),e("#_react_"+a+"_image_retina_use_main_img").change(function(){var t=e(this),a=t.val();"use-new-img"==a?t.closest(o).find(".image_retina_use_main_img_is_yes").slideDown():t.closest(o).find(".image_retina_use_main_img_is_yes").slideUp(),"never"!=a?(t.closest(o).find(".image_retina_use_main_img_is_yes_or").slideDown(),t.closest(o).find(".react-background-image-retina-settings").slideDown()):(t.closest(o).find(".image_retina_use_main_img_is_yes_or").slideUp(),t.closest(o).find(".react-background-image-retina-settings").slideUp())}).change(),e("#_react_"+a+"_image_convert").change(function(){"custom"==e(this).val()?e("#_react_"+a+"_image_convert_custom").closest(c).fadeIn():e("#_react_"+a+"_image_convert_custom").closest(c).fadeOut()}).change(),e("#react-toggle-meta-textures-"+a).click(function(){var t=e(this);t.hasClass("active")?(e(".react-meta-texture-wrap-"+a+", .react-meta-detail-wrap-"+a+", .react-meta-image-wrap-"+a).slideUp(),t.removeClass("active")):(e(".react-meta-texture-wrap-"+a+", .react-meta-detail-wrap-"+a+", .react-meta-image-wrap-"+a).slideDown(),t.addClass("active"))}),e("#_react_"+a+"_image_parallax").bind("keyup blur",function(){"1"!=e(this).val()?e("#_react_"+a+"_image_parallax_offset").closest(c).fadeIn():e("#_react_"+a+"_image_parallax_offset").closest(c).fadeOut()}).blur()});var n=e(".react-information-wrap"),_=n.find(".react-add"),r=n.find(".react-information-holder"),s=e("#_react_information"),d=function(){var t=[];r.find(".react-information").each(function(){var a=e(this);t.push({title:a.find(".react-information-title").val(),value:a.find(".react-information-value").val()})}),s.val(JSON.stringify(t))};_.click(function(){var t=e(reactAdminL10n.informationHtml);r.append(t),d()}),r.on("click",".react-information-remove",function(){e(this).closest(".react-information").remove(),d()}),r.on("keyup blur",".react-information-title, .react-information-value",function(){d()}),e("#_react_type").change(function(){switch(e(this).val()){default:case"image":e("#_react_video_embed").closest(o).hide();break;case"video_embed":e("#_react_video_embed").closest(o).show()}}).change(),e("#_react_page_layout_top_margin_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_top_margin").closest(c).slideDown():e("#_react_page_layout_top_margin").closest(c).slideUp()}).change(),e("#_react_page_layout_top_margin_phones_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_top_margin_phones").closest(c).slideDown():e("#_react_page_layout_top_margin_phones").closest(c).slideUp()}).change(),e("#_react_page_layout_top_margin_tablets_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_top_margin_tablets").closest(c).slideDown():e("#_react_page_layout_top_margin_tablets").closest(c).slideUp()}).change(),e("#_react_page_layout_top_margin_tv_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_top_margin_tv").closest(c).slideDown():e("#_react_page_layout_top_margin_tv").closest(c).slideUp()}).change(),e("#_react_page_layout_bottom_margin_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_bottom_margin").closest(c).slideDown():e("#_react_page_layout_bottom_margin").closest(c).slideUp()}).change(),e("#_react_page_layout_bottom_margin_phones_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_bottom_margin_phones").closest(c).slideDown():e("#_react_page_layout_bottom_margin_phones").closest(c).slideUp()}).change(),e("#_react_page_layout_bottom_margin_tablets_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_bottom_margin_tablets").closest(c).slideDown():e("#_react_page_layout_bottom_margin_tablets").closest(c).slideUp()}).change(),e("#_react_page_layout_bottom_margin_tv_choose").change(function(){"custom"===e(this).val()?e("#_react_page_layout_bottom_margin_tv").closest(c).slideDown():e("#_react_page_layout_bottom_margin_tv").closest(c).slideUp()}).change(),e("#_react_slider").change(function(){""!==e(this).val()&&"home"!==e(this).val()?(e("#_react_slider_id").closest(o).slideDown(),e("#_react_slider_convert_id").closest(o).slideDown()):(e("#_react_slider_id").closest(o).slideUp(),e("#_react_slider_convert_id").closest(o).slideUp())}).change(),e("#_react_background_video_complete").change(function(){"redirect"==e(this).val()?e("#_react_background_video_redirect").closest(o).slideDown():e("#_react_background_video_redirect").closest(o).slideUp()}).change(),e("#_react_show_skip").change(function(){e(this).is(":checked")?e("#_react_skip_url, #_react_skip_text").closest(o).slideDown():e("#_react_skip_url, #_react_skip_text").closest(o).slideUp()}).change(),"function"==typeof e.fn.toggleSwitch&&(e("input.react-option-toggle, select.react-option-tritoggle").toggleSwitch({onText:reactAdminL10n.on,offText:reactAdminL10n.off,defaultText:reactAdminL10n._default}),e("input.react-option-toggle-yn, select.react-option-tritoggle-yn").toggleSwitch({defaultText:reactAdminL10n._default,onText:reactAdminL10n.yes,offText:reactAdminL10n.no})),e("#_react_footer_convert").change(function(){e("#_react_footer_convert_custom").closest(".react-meta-multi-outer")["custom"==e(this).val()?"slideDown":"slideUp"]()}).change();var l=e("#react-audio-tracks"),m=function(){var t=0;return l.find("> .react-audio-track").each(function(){t=Math.max(e(this).data("id"),t)}),t+1};e("#react-add-audio-track-button").click(function(){var i=e(reactAdminL10n.backgroundAudioHtml).data("id",m());return l.append(i),i.find(".react-edit-audio-track").click().end().find(".react-audio-format-m4a").focus(),t(i),a(),!1}),l.sortable({handle:".react-drag-audio-track",stop:a}),l.on("click",".react-edit-audio-track",function(){var t=e(this),a=t.closest(".react-audio-track"),i=a.find(".react-audio-track-settings"),o=a.find(".react-audio-track-name-inner"),c=a.find(".react-audio-track-name-input");t.hasClass("react-open")?(i.add(c).hide(),o.show(),t.removeClass("react-open")):(o.hide(),i.add(c).show(),t.addClass("react-open"))}),l.on("keyup blur",".react-audio-track-name-input",function(){var t=e(this);t.siblings(".react-audio-track-name-inner").text(t.val()),a()}),l.on("click",".react-delete-audio-track",function(){confirm(reactAdminL10n.confirmDeleteAudioTrack)&&(e(".qtip").hide(),e(this).closest(".react-audio-track").remove(),a())}),e(".react-audio-track").each(function(){t(e(this))}),l.on("blur",".react-audio-format-input",a),e("#page_template").change(function(){var t=e(this).val(),a=e(".react-page-template-settings").hide(),i=e("#_react_show_skip").closest(o),c=e("#_react_skip_url").closest(o),n=e("#_react_skip_text").closest(o),_=e("#_react_layout").closest(o),r=e("#_react_content_style").closest(o),s=e(".react-intro-settings"),d=e("#_react_intro_style").closest(o),l=e("#_react_intro_title").closest(o),m=e("#_react_intro_subtitle").closest(o),u=e("#_react_quform_id").closest(o),h=e("#_react_note_block_align").closest(o),g=e("#_react_note_block_header").closest(o),p=e("#_react_note_block_palette").closest(o),v=e("#_react_show_footer").closest(o);"template-fullscreen-media.php"==t||"template-note-block.php"==t?(i.add(a).add(v).show(),e("#_react_show_skip").is(":checked")?c.add(n).show():c.add(n).hide()):i.add(c).add(n).add(v).hide(),"template-note-block.php"==t?h.add(g).add(p).show():h.add(g).add(p).hide(),"template-fullscreen-media.php"==t||"template-note-block.php"==t||"template-no-content-style.php"==t?_.add(r).add(s).add(d).add(l).add(m).hide():_.add(r).add(s).add(d).add(l).add(m).show(),"template-contact.php"==t?u.add(a).show():u.hide()}).change()})}(jQuery);