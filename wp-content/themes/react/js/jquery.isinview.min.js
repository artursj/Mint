// jQuery.isInView, v1.0.1
// Copyright (c)2015 Michael Heim, Zeilenwechsel.de
// Distributed under MIT license
// http://github.com/hashchange/jquery.isinview


!function(a){"use strict";function b(b,d){var e,f,g,h,i,j,k,l={target:{}},p={},q={},r=b[0];if(b=b.eq(0),d||(d="both"),l.getBoth="both"===d,l.getHorizontal="horizontal"===d||l.getBoth,l.getVertical="vertical"===d||l.getBoth,"horizontal"!==d&&"vertical"!==d&&"both"!==d)throw new Error("Invalid parameter value: axis = "+d);return b.length?(l.target.isWindow=a.isWindow(r),l.target.isWindow?q.document=r.document:9===r.nodeType?(q.document=r,l.target.isWindow=!0):r===r.ownerDocument.documentElement?(q.document=r.ownerDocument,l.target.isWindow=!0):1===r.nodeType&&"iframe"===r.tagName.toLowerCase()?(q.document=r.contentDocument||r.contentWindow.document,l.target.isWindow=!0):r===r.ownerDocument.body&&(q.document=r.ownerDocument,l.target.isBody=!0),(l.target.isWindow||l.target.isBody)&&(q.window=q.document.defaultView||q.document.parentWindow,q.$document=a(q.document),q.documentElement=q.document.documentElement,q.body=q.document.body,r=b=void 0),l.target.isWindow?p=m(l,q):l.target.isBody?(g=n(l,q).body,e=a(q.body),l.getHorizontal&&(p.horizontal=g.overflowScrollX||g.overflowAutoX&&q.body.clientHeight<e.height()),l.getVertical&&(p.vertical=g.overflowScrollY||g.overflowAutoY&&q.body.clientWidth<e.width())):(f=x(r,["overflow","overflowX","overflowY"],{toLowerCase:!0}),f=o(f,!0),j=r.scrollWidth,k=r.scrollHeight,p.horizontal=j>0&&(f.overflowScrollX||f.overflowAutoX&&(h=b.innerWidth())<j),p.vertical=k>0&&(f.overflowScrollY||f.overflowAutoY&&(i=b.innerHeight())<k),p.vertical=p.vertical||p.horizontal&&f.overflowAutoY&&(void 0!==i?i:b.innerHeight())-c()<k,p.horizontal=p.horizontal||p.vertical&&f.overflowAutoX&&(void 0!==h?h:b.innerWidth())-c()<j),l.getBoth?p:l.getHorizontal?p.horizontal:p.vertical):void 0}function c(){var a;return void 0===B&&(a=document.createElement("div"),a.style.cssText="width: 100px; height: 100px; overflow: scroll; position: absolute; top: -500px; left: -500px; margin: 0px; padding: 0px; border: none;",document.body.appendChild(a),B=a.offsetWidth-a.clientWidth,document.body.removeChild(a)),B}function d(a,d){var e,f,g,h,i,j,k=c();if(d||(d="both"),g="both"===d,e="horizontal"===d||g,f="vertical"===d||g,"horizontal"!==d&&"vertical"!==d&&"both"!==d)throw new Error("Invalid parameter value: axis = "+d);return a.length?0===k?g?{horizontal:0,vertical:0}:0:(h=g?b(a):e?{horizontal:b(a,"horizontal")}:{vertical:b(a,"vertical")},e&&(i=h.horizontal?k:0),f&&(j=h.vertical?k:0),g?{horizontal:i,vertical:j}:e?i:j):void 0}function e(b){var c=b[0],d=c&&(9===c.nodeType?c:c.ownerDocument);return d&&(d.defaultView||d.parentWindow)||a.isWindow(c)&&c||void 0}function f(b,c,d){var e,f=[];return b.length?(e=h(b,c,d),r(b[0],e.container),b.each(function(){i(this,e)&&f.push(this)}),a(f)):a()}function g(a,b,c){var d,e=a[0];return a.length?(d=h(a,b,c),r(e,d.container),i(e,d)):!1}function h(b,c,d){var f,g,h={};return d||(d={}),c||(c=e(b)),h.$container=f=q(c),h.container=c=f[0],s(d),g=d.direction||"both",h.useVertical="both"===g||"vertical"===g,h.useHorizontal="both"===g||"horizontal"===g,h.partially=d.partially,h.excludeHidden=d.excludeHidden,h.borderBox="content-box"!==d.box,h.containerIsWindow=a.isWindow(c),void 0!==d.tolerance?(h.toleranceType=z(d.tolerance)||"px"===d.tolerance.slice(-3)?"add":"multiply",h.tolerance="add"===h.toleranceType?parseFloat(d.tolerance):parseFloat(d.tolerance)/100+1):(h.tolerance=0,h.toleranceType="add"),h.cache={},h}function i(a,b){var c,d,e,f,g,h=b.container,i=b.$container,l=b.cache,m=!0;if(a===h)throw new Error("Invalid container: is the same as the element");return!b.excludeHidden||a.offsetWidth>0&&a.offsetHeight>0?(b.useHorizontal&&(c=t(i,b.containerIsWindow,l)),b.useVertical&&(d=u(i,b.containerIsWindow,l)),e=void 0!==l.hTolerance?l.hTolerance:l.hTolerance="add"===b.toleranceType?b.tolerance:c*b.tolerance,f=void 0!==l.vTolerance?l.vTolerance:l.vTolerance="add"===b.toleranceType?b.tolerance:d*b.tolerance,g=b.borderBox?a.getBoundingClientRect():k(a),b.containerIsWindow||(g=j(g,i,l)),b.partially?(b.useVertical&&(m=g.top<d+f&&g.bottom>-f),b.useHorizontal&&(m=m&&g.left<c+e&&g.right>-e)):(b.useVertical&&(m=g.top>=-f&&g.top<d+f&&g.bottom>-f&&g.bottom<=d+f),b.useHorizontal&&(m=m&&g.left>=-e&&g.left<c+e&&g.right>-e&&g.right<=c+e)),m):!1}function j(a,b,c){var d;return c&&c.containerPaddingRectRoot?d=c.containerPaddingRectRoot:(d=l(b[0]),c&&(c.containerPaddingRectRoot=d)),{top:a.top-d.top,bottom:a.bottom-d.top,left:a.left-d.left,right:a.right-d.left}}function k(a){var b=a.getBoundingClientRect(),c=x(a,["borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft"],{toFloat:!0});return{top:b.top+c.paddingTop+c.borderTopWidth,right:b.right-(c.paddingRight+c.borderRightWidth),bottom:b.bottom-(c.paddingBottom+c.borderBottomWidth),left:b.left+c.paddingLeft+c.borderLeftWidth}}function l(a){var b=a.getBoundingClientRect(),c=x(a,["borderTopWidth","borderLeftWidth"],{toFloat:!0});return{top:b.top+c.borderTopWidth,left:b.left+c.borderLeftWidth}}function m(b,d){var e,f,g,h=c(),i={},j=!b.getHorizontal,k=!b.getVertical;return b.getHorizontal&&h>0&&(e=d.window.innerHeight,e>10&&(i.horizontal=e>d.documentElement.clientHeight,j=!0)),b.getVertical&&h>0&&(f=d.window.innerWidth,f>10&&(i.vertical=f>d.documentElement.clientWidth,k=!0)),j&&k||(g=n(b,d).window,!j&&g.overflowScrollX&&(i.horizontal=j=!0),!k&&g.overflowScrollY&&(i.vertical=k=!0),!j&&g.overflowHiddenX&&(i.horizontal=!1,j=!0),!k&&g.overflowHiddenY&&(i.vertical=!1,k=!0),j||(i.horizontal=d.documentElement.clientWidth<a.documentWidth(d.document)),k||(i.vertical=d.documentElement.clientHeight<a.documentHeight(d.document))),i}function n(a,b){var c,d,e=["overflow"],f=["overflow"];return a.getHorizontal&&(e.push("overflowX"),f.push("overflowX")),a.getVertical&&(e.push("overflowY"),f.push("overflowY")),c=x(b.documentElement,e,{toLowerCase:!0}),d=x(b.body,f,{toLowerCase:!0}),p(c,d)}function o(b,c){var d={};return d.overflowX=b.overflowX||b.overflow||"visible",d.overflowY=b.overflowY||b.overflow||"visible",c&&a.each(["Visible","Auto","Scroll","Hidden"],function(a,b){var c=b.toLowerCase();d["overflow"+b+"X"]=d.overflowX===c,d["overflow"+b+"Y"]=d.overflowY===c}),d}function p(a,b){var c=o(a,!1),d=o(b,!1),e={window:{},body:{}};return"visible"===c.overflowX?(e.body.overflowX="visible",e.window.overflowX=d.overflowX):(e.body.overflowX=d.overflowX,e.window.overflowX=c.overflowX),"visible"===c.overflowY?(e.body.overflowY="visible",e.window.overflowY=d.overflowY):(e.body.overflowY=d.overflowY,e.window.overflowY=c.overflowY),"visible"===e.window.overflowX&&(e.window.overflowX="auto"),"visible"===e.window.overflowY&&(e.window.overflowY="auto"),y()&&("hidden"===e.window.overflowX&&(e.window.overflowX="auto"),"hidden"===e.window.overflowY&&(e.window.overflowY="auto")),e.window=o(e.window,!0),e.body=o(e.body,!0),e}function q(b){var c,d=b instanceof a;if(!(d||a.isWindow(b)||b.nodeType||A(b)))throw new Error("Invalid container: not a window, node, jQuery object or selector string");if(c=d?b:b===E?F:a(b),!c.length)throw new Error("Invalid container: empty jQuery object");if(b=c[0],9===b.nodeType?c=q(b.defaultView||b.parentWindow):1===b.nodeType&&"iframe"===b.tagName.toLowerCase()&&(c=q(b.contentWindow)),!a.isWindow(c[0])&&"visible"===c.css("overflow"))throw new Error("Invalid container: is set to overflow:visible. Containers must have the ability to obscure some of their content, otherwise the in-view test is pointless. Containers must be set to overflow:scroll/auto/hide, or be a window (or document, or iframe, as proxies for a window)");return c}function r(b,c){var d;if(1!==b.nodeType)throw new Error("Invalid node: is not an element");if(d=a.isWindow(c)?b.ownerDocument&&c===(b.ownerDocument.defaultView||b.ownerDocument.parentWindow):9===c.nodeType?a.contains(c.documentElement,b):a.contains(c,b),!d)throw new Error("Invalid container: is not an ancestor of the element")}function s(a){var b,c;if(a.direction&&"vertical"!==a.direction&&"horizontal"!==a.direction&&"both"!==a.direction)throw new Error('Invalid option value: direction = "'+a.direction+'"');if(a.box&&"border-box"!==a.box&&"content-box"!==a.box)throw new Error('Invalid option value: box = "'+a.box+'"');if(void 0!==a.tolerance&&(b=z(a.tolerance),c=A(a.tolerance)&&/^[+-]?\d*\.?\d+(px|%)?$/.test(a.tolerance),!b&&!c))throw new Error('Invalid option value: tolerance = "'+a.tolerance+'"')}function t(a,b,c){var d;return c&&void 0!==c.netContainerWidth?d=c.netContainerWidth:(d=b?w(a,"Width"):a.innerWidth()-v(a,c).vertical,c&&(c.netContainerWidth=d)),d}function u(a,b,c){var d;return c&&void 0!==c.netContainerHeight?d=c.netContainerHeight:(d=b?w(a,"Height"):a.innerHeight()-v(a,c).horizontal,c&&(c.netContainerHeight=d)),d}function v(a,b){var c;return b&&b.containerScrollbarWidths?c=b.containerScrollbarWidths:(c=d(a),b&&(b.containerScrollbarWidths=c)),c}function w(a,b){var c=a[0].document,d="client"+b;return"BackCompat"===c.compatMode?c.body[d]:c.documentElement[d]}function x(b,c,d){var e,f,g,h={},i=b.ownerDocument.defaultView||b.ownerDocument.parentWindow,j=D?i.getComputedStyle(b,null):b.currentStyle;for(d||(d={}),a.isArray(c)||(c=[c]),f=c.length,e=0;f>e;e++)g=c[e],h[g]=a.css(b,g,!1,j),d.toLowerCase&&h[g]&&h[g].toLowerCase&&(h[g]=h[g].toLowerCase()),d.toFloat&&(h[g]=parseFloat(h[g]));return h}function y(){return void 0===C&&(C=/iPad|iPhone|iPod/g.test(navigator.userAgent)),C}function z(a){var b="number"==typeof a||a&&"object"==typeof a&&"[object Number]"===Object.prototype.toString.call(a)||!1;return b&&a===+a}function A(a){return"string"==typeof a||a&&"object"==typeof a&&"[object String]"===Object.prototype.toString.call(a)||!1}var B,C,D=!!window.getComputedStyle,E=window,F=a(window);a.fn.hasScrollbar=function(a){return b(this,a)},a.fn.scrollbarWidth=function(a){return d(this,a)},a.scrollbarWidth=c,a.fn.ownerWindow=function(){return e(this)},a.fn.inView=function(a,b){return f(this,a,b)},a.fn.inViewport=function(a){return f(this,e(this),a)},a.fn.isInView=function(a,b){return g(this,a,b)},a.fn.isInViewport=function(a){return g(this,e(this),a)},a.expr.match.inviewport=/^(?:inVieport)$/i,a.expr.setFilters.inviewport=a.expr.createPseudo(function(){return a.expr.createPseudo(function(b,c){var d,e,f=b.length;if(f)for(e=h(a(b)),r(b[0],e.container),d=0;f>d;d++)c[d]=i(b[d],e)?b[d]:void 0})}),a(c)}("undefined"!=typeof jQuery?jQuery:$);
