/*
 * Sidr
 * https://github.com/artberri/sidr
 * From fork: https://github.com/sammoore/sidr/
 * TC mods: removed touchstart/resize event hooks to stop menu closing on drag on Android
 *
 * Copyright (c) 2013 Alberto Varela
 * Licensed under the MIT license.
 */
!function(a){var b=!1,c=!1,d={isUrl:function(a){var b=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return b.test(a)?!0:!1},loadContent:function(a,b){a.html(b)},addPrefix:function(a){var b=a.attr("id"),c=a.attr("class");"string"==typeof b&&""!==b&&a.attr("id",b.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-id-$1")),"string"==typeof c&&""!==c&&"sidr-inner"!==c&&a.attr("class",c.replace(/([A-Za-z0-9_.\-]+)/g,"sidr-class-$1")),a.removeAttr("style")},execute:function(d,f,g){"function"==typeof f?(g=f,f="sidr"):f||(f="sidr");var q,r,s,h=a("#"+f),i=a(h.data("body")),j=a("html"),k=h.outerWidth(!0),l=h.data("speed"),m=h.data("side"),n=h.data("displace"),o=h.data("onOpen"),p=h.data("onClose"),t="sidr"===f?"sidr-open":"sidr-open "+f+"-open";if("open"===d||"toggle"===d&&!h.is(":visible")){if(h.is(":visible")||b)return;if(c!==!1)return void e.close(c,function(){e.open(f)});b=!0,"left"===m?(q={left:k+"px"},r={left:"0px"}):(q={right:k+"px"},r={right:"0px"}),i.is("body")&&(s=j.scrollTop(),j.css("overflow-x","hidden").scrollTop(s)),n?i.addClass("sidr-animating").css({width:i.width(),position:"absolute"}).animate(q,l,function(){a(this).addClass(t)}):setTimeout(function(){a(this).addClass(t)},l),h.css("display","block").animate(r,l,function(){b=!1,c=f,"function"==typeof g&&g(f),i.removeClass("sidr-animating")}),o()}else{if(!h.is(":visible")||b)return;b=!0,"left"===m?(q={left:0},r={left:"-"+k+"px"}):(q={right:0},r={right:"-"+k+"px"}),i.is("body")&&(s=j.scrollTop(),j.removeAttr("style").scrollTop(s)),i.addClass("sidr-animating").animate(q,l).removeClass(t),h.animate(r,l,function(){h.removeAttr("style").hide(),i.removeAttr("style"),a("html").removeAttr("style"),b=!1,c=!1,"function"==typeof g&&g(f),i.removeClass("sidr-animating")}),p()}}},e={open:function(a,b){d.execute("open",a,b)},close:function(a,b){d.execute("close",a,b)},toggle:function(a,b){d.execute("toggle",a,b)},toogle:function(a,b){d.execute("toggle",a,b)}};a.sidr=function(b){return e[b]?e[b].apply(this,Array.prototype.slice.call(arguments,1)):"function"!=typeof b&&"string"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.sidr"):e.toggle.apply(this,arguments)},a.fn.sidr=function(f){var g=a.extend({name:"sidr",speed:200,side:"left",source:null,renaming:!0,body:"body",displace:!0,onOpen:function(){},onClose:function(){}},f),h=g.name,i=a("#"+h);if(0===i.length&&(i=a("<div />").attr("id",h).appendTo(a("body"))),i.addClass("sidr").addClass(g.side).data({speed:g.speed,side:g.side,body:g.body,displace:g.displace,onOpen:g.onOpen,onClose:g.onClose}),"function"==typeof g.source){var j=g.source(h);d.loadContent(i,j)}else if("string"==typeof g.source&&d.isUrl(g.source))a.get(g.source,function(a){d.loadContent(i,a)});else if("string"==typeof g.source){var k="",l=g.source.split(",");if(a.each(l,function(b,c){k+='<div class="sidr-inner">'+a(c).html()+"</div>"}),g.renaming){var m=a("<div />").html(k);m.find("*").each(function(b,c){var e=a(c);d.addPrefix(e)}),k=m.html()}d.loadContent(i,k)}else null!==g.source&&a.error("Invalid Sidr Source");return a("#"+h).find("a").each(function(){a(this).click(function(){e.toggle(h)})}),this.each(function(){var d=a(this),f=d.data("sidr");f||(c=!1,b=!1,d.data("sidr",h),d.click(function(a){a.preventDefault(),e.toggle(h)}))})}}(jQuery);
