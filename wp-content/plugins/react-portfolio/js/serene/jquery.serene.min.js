/*!
 * Serene Full Screen Gallery v2.0.6 (19 Aug 2015)
 *
 * Copyright 2011-2015 ThemeCatcher
 *
 * All rights reserved
 */
!function(e,i){"use strict";function t(i,t){var s=P.eq(i);if(s.length&&void 0===G[i]){G[i]=!0;var n=e("<img/>"),a=!1;n.one("load",function(){e("div",m).eq(i).append(n),setTimeout(function(){c(n),r(),"function"==typeof t&&t()},1)}).bind("error",function(){!a&&B.errorBackground&&n.attr("src",B.errorBackground),a=!0}),setTimeout(function(){n.attr("src",s.attr("href"))},1)}}function s(){return J===j-1?0:J+1}function n(){return 0===J?j-1:J-1}function a(e){return e[Math.floor(Math.random()*e.length)]}function o(e,i){"function"==typeof i&&i(),f.trigger(e)}function l(){A=e(i),I=e("body"),f=e('<div class="serene-outer"></div>').append(h=e('<div class="serene-overlay"></div>'),m=e('<div class="serene-stage"></div>'),b=e('<div class="serene-caption-outer"></div>').append(e('<div class="serene-caption-helper"></div>').append(g=e('<div class="serene-caption"></div>'))),k=e('<div class="serene-controls-outer"></div>').append(C=e('<div class="serene-controls"></div>').append(T=e('<div class="serene-prev"></div>'),x=e('<div class="serene-play"></div>'),L=e('<div class="serene-next"></div>')),S=e('<div class="serene-loading-wrap"></div>').append(q=e('<div class="serene-loading"></div>')),D=e('<div class="serene-close-wrap"></div>').append(O=e('<div class="serene-close"></div>')))),I.append(f),L.click(function(){return E.next(),!1}),T.click(function(){return E.prev(),!1}),D.click(E.close),R=I.css("overflow"),I.on("click",".serene-element",function(i){i.preventDefault(),o(Y,B.onOpen),h.css("opacity",B.opacity).add(m).fadeIn(),I.css("overflow","hidden"),N=!0,d(e(this))})}function d(i){P=i;var a=i.data("serene-group");a&&(P=e(".serene-element").filter(function(){return e(this).data("serene-group")===a}),J=P.index(i)),j=P.length;for(var o=0;j>o;o++)m.append('<div class="serene-slide"/>');if(j>1){if(C.fadeIn(3500),m.click(function(){L.click()}).css("cursor","pointer"),B.keyboard&&e(document).bind("keydown.serene",function(e){N&&27===e.keyCode&&(e.preventDefault(),E.close()),N&&j>1&&(37===e.keyCode?(e.preventDefault(),T.click()):39===e.keyCode&&(e.preventDefault(),L.click()))}),B.slideshow&&(B.slideshowAuto?E.start():E.stop(),x.show(),k.addClass("serene-slideshow")),B.bullets){Q=e('<div class="serene-bullets"/>');for(var l=0;j>l;l++){var d=P.eq(l).data("title")||"";e('<div class="serene-bullet">'+l+"</div>").data("index",l).attr("title",d).appendTo(Q)}e(".serene-bullet",Q).click(function(){return E.go(e(this).data("index")),!1}),C.append(Q)}}else k.addClass("serene-single");k.fadeIn(B.controlSpeed);var c=setTimeout(function(){k.addClass("serene-load")},200);t(J,function(){clearTimeout(c),k.removeClass("serene-load"),A.resize(e.isFunction(e.throttle)?e.throttle(100,r):r),p()}),t(s()),j>2&&t(n())}function r(){var i=m.width(),t=m.height(),s=t/i;e("img",m).each(function(){var n=e(this),a=n.data("imageRatio"),o={};switch(s>a?B.fitAlways?n.width(i).height(i*a):1>=a&&B.fitLandscape?n.width(i).height(i*a):n.height(t).width(t/a):B.fitAlways?n.height(t).width(t/a):a>1&&B.fitPortrait?n.height(t).width(t/a):n.width(i).height(i*a),B.positionX){case"left":o.left=0,o.right="auto";break;case"right":o.left="auto",o.right=0;break;default:case"center":o.left=(i-n.width())/2+"px",o.right="auto"}switch(B.positionY){case"top":o.top=0,o.bottom="auto";break;case"bottom":o.top="auto",o.bottom=0;break;default:case"center":o.top=(t-n.height())/2+"px",o.bottom="auto"}n.css(o)})}function c(e){var i=e.width(),t=e.height();e.data({imageWidth:i,imageHeight:t,imageRatio:t/i})}function p(i){if(y=e("div:eq("+J+")",m),0===y.find("img").length)return void 0!==M&&clearTimeout(M),void(M=setTimeout(function(){p(i)},1e3));switch(o(z,B.onLoad),K=!0,k.addClass("serene-animating"),e(".serene-prev-slide",m).removeClass("serene-prev-slide"),w=e(".serene-current-slide",m).removeClass("serene-current-slide").addClass("serene-prev-slide"),t(i?n():s()),v(),"none"===B.transition?b.hide():b.stop().animate({opacity:0},B.captionSpeed,function(){b.hide()}),y.css("visibility","hidden").addClass("serene-current-slide"),B.lowQuality&&m.addClass("serene-low"),B.transition){case"none":y.css("visibility","visible"),u();break;default:case"fade":y.animate({opacity:0},0).css("visibility","visible").animate({opacity:1},B.speed,B.easing,u);break;case"fadeOutFadeIn":var a=function(){y.animate({opacity:0},0).css("visibility","visible").animate({opacity:1},B.speed,B.easing,u)};w.length?w.animate({opacity:0},B.speed,B.easing,a):a();break;case"slideDown":i?y.animate({top:m.height()},0).css("visibility","visible").animate({top:0},B.speed,B.easing,u):y.animate({top:-m.height()},0).css("visibility","visible").animate({top:0},B.speed,B.easing,u);break;case"slideRight":i?y.animate({left:-m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u):y.animate({left:m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u);break;case"slideUp":i?y.animate({top:-m.height()},0).css("visibility","visible").animate({top:0},B.speed,B.easing,u):y.animate({top:m.height()},0).css("visibility","visible").animate({top:0},B.speed,B.easing,u);break;case"slideLeft":i?y.animate({left:m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u):y.animate({left:-m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u);break;case"carouselRight":i?(y.animate({left:-m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u),w.animate({left:0},0).animate({left:m.width()},B.speed,B.easing)):(y.animate({left:m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u),w.animate({left:-m.width()},B.speed,B.easing));break;case"carouselLeft":i?(y.animate({left:m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u),w.animate({left:0},0).animate({left:-m.width()},B.speed,B.easing)):(y.animate({left:-m.width()},0).css("visibility","visible").animate({left:0},B.speed,B.easing,u),w.animate({left:m.width()},B.speed,B.easing))}}function u(){K=!1,B.lowQuality&&m.removeClass("serene-low");var i=P.eq(J),t=i.data("caption"),s=t?e(t).html():"",n=i.data("caption-position")||B.captionPosition;"random"===n&&(n=a(V)+" "+a(Z)),s&&N&&(g.html(s),B.captionEnhancement(b),b.attr("class","serene-caption-outer").addClass("serene-position-"+n.split(" ").join("-")).stop().show().animate({opacity:1},B.captionSpeed)),k.removeClass("serene-animating"),o(H,B.onComplete)}function v(){B.bullets&&j>1&&Q.children().removeClass("active-bullet").eq(J).addClass("active-bullet")}var f,h,m,b,g,w,y,k,C,T,x,L,S,q,D,O,Q,A,I,P,R,j,B,E,F,M,X={speed:2e3,transition:"fade",fitLandscape:!1,fitPortrait:!0,positionX:"center",positionY:"center",easing:"swing",slideshow:!0,slideshowAuto:!0,slideshowSpeed:5e3,keyboard:!0,captionPosition:"center bottom",captionSpeed:600,bullets:!0,lowQuality:!1,errorBackground:"",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClose:!1,captionEnhancement:function(){}},Y="sereneOpen",z="sereneLoad",H="sereneComplete",U="sereneCleanup",W="sereneClose",G=[],J=0,K=!1,N=!1,V=["left","center","right"],Z=["top","center","bottom"],$=!1;E=e.fn.serene=function(i){var t=this;return!t[0]&&t.selector?t:(B=e.extend({},X,i||{}),t.each(function(){e(this).addClass("serene-element")}))},E.close=function(){o(U,B.onCleanup),K=!1,B.lowQuality&&m.removeClass("serene-low"),w&&w.length&&w.stop(),y&&y.length&&y.stop(),k.removeClass("serene-animating").stop(!0,!0).hide(),B.slideshow&&clearTimeout(F),void 0!==M&&clearTimeout(M),e(".serene-slide",m).remove(),G=[],b.stop(!0,!0).hide().attr("class","serene-caption-outer"),g.html(""),B.bullets&&e(".serene-bullets",C).remove(),I.css("overflow",R),h.add(m).fadeOut(),N=!1,B.keyboard&&e(document).unbind("keydown.serene"),o(W,B.onClose)},E.next=function(){return K?!1:(J=s(),void p())},E.prev=function(){return K?!1:(J=n(),void p(!0))},E.go=function(e){return K||J===e?!1:void(e>J?(J=e,void 0===G[J]?t(J,p):p()):(J=e,void 0===G[J]?t(J,function(){p(!0)}):p()))},E.start=function(){B.slideshow&&!$&&($=!0,f.bind(H,function(){F=setTimeout(E.next,B.slideshowSpeed)}).bind(z,function(){clearTimeout(F)}).bind(U,E.stop),x.removeClass("serene-play").addClass("serene-pause").unbind("click").one("click",E.stop),F=setTimeout(E.next,B.slideshowSpeed))},E.stop=function(){B.slideshow&&(clearTimeout(F),f.unbind([H,z,U].join(" ")),x.unbind("click").removeClass("serene-pause").addClass("serene-play").one("click",E.start),$=!1)},e(document).ready(function(){l()})}(jQuery,window);